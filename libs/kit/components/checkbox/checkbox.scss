// options
@mixin size($size) {
  &:where(.x-size-#{$size}) {
    @content;
  }
}

@mixin radius($radius) {
  &:where(.x-radius-#{$radius}) {
    @content;
  }
}

// states
@mixin hover {
  @media (hover: hover) {
    &:where(:hover:not(:disabled)) {
      @content;
    }
  }
}

@mixin active {
  &:where(:active:not(:disabled)) {
    @content;
  }
}

@mixin checked {
  &:where([data-state='checked'], [data-state='indeterminate']) {
    @content;
  }
}

@mixin disabled {
  &:where(:disabled) {
    @content;
  }
}

@mixin focus-visible {
  &:where(:focus-visible) {
    @content;
  }
}

@mixin invalid {
  &:where(.ng-invalid.ng-touched) {
    @content;
  }
}

.x-checkbox {
  --x-bg-color: var(--x-white);
  --x-border-color: var(--x-neutral-300);

  position: relative;
  display: inline-flex;
  flex-shrink: 0;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  inline-size: var(--x-size);
  block-size: var(--x-size);
  color: transparent;
  background-color: var(--x-bg-color);
  outline: 0.125rem solid transparent;
  outline-offset: 0.125rem;
  box-shadow: inset 0 0 0 1px var(--x-border-color), rgb(27 31 35 / 4%) 0 1px 0;
  border-radius: var(--x-radius);
  transition-timing-function: ease-in-out;
  transition-duration: 100ms;
  transition-property: background-color, color, opacity, box-shadow;
  cursor: pointer;

  @include hover {
    --x-bg-color: var(--x-neutral-100);
    --x-border-color: var(--x-neutral-400);
  }

  @include active {
    --x-bg-color: var(--x-neutral-200);
    --x-border-color: var(--x-neutral-400);
  }

  @include invalid {
    --x-bg-color: var(--x-error-100);
    --x-border-color: var(--x-error-600);

    @include hover {
      --x-bg-color: var(--x-error-200);
    }

    @include active {
      --x-bg-color: var(--x-error-300);
    }
  }

  @include disabled {
    --x-bg-color: var(--x-neutral-100);
    --x-border-color: var(--x-neutral-300);

    cursor: var(--x-cursor-disabled);
  }

  @include checked {
    --x-bg-color: var(--x-main-600);
    --x-border-color: var(--x-main-600);

    @include active {
      --x-bg-color: var(--x-main-700);
      --x-border-color: var(--x-main-700);
    }

    @include disabled {
      opacity: 0.6;
    }

    .x-checkbox-icon {
      --x-icon-color: var(--x-white);

      transform: scale(1);
    }
  }

  @include focus-visible {
    outline-color: var(--x-main-600);
  }

  @include size(sm) {
    --x-size: 1rem;
  }

  @include size(md) {
    --x-size: 1.25rem;
  }

  @include size(lg) {
    --x-size: 1.5rem;
  }

  @include radius(none) {
    --x-radius: var(--x-radius-none);
  }

  @include radius(sm) {
    --x-radius: var(--x-radius-sm);
  }

  @include radius(md) {
    --x-radius: var(--x-radius-md);
  }

  @include radius(lg) {
    --x-radius: var(--x-radius-lg);
  }

  @include radius(full) {
    --x-radius: var(--x-radius-full);
  }
}

.x-checkbox-icon {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  inline-size: 100%;
  block-size: 100%;
  font-size: var(--x-size);
  transform: scale(0);
  transition: transform 150ms ease-in-out;
}
