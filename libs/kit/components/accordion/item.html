@let $ = slots() | asRecord;

<details
  #el
  [attr.name]="groupName()"
  [attr.open]="open() ? '' : null"
  (toggle)="open.set(el.open)">
  <summary class="x-accordion-label">
    <span class="x-accordion-label-text">
      <ng-content />
    </span>

    <span class="x-accordion-label-icon">
      @if ($.icon) {
        <ng-container *ngTemplateOutlet="$.icon; context: { $implicit: open() }" />
      } @else {
        <x-icon class="x-accordion-icon-animate" src="chevron-down" />
      }
    </span>
  </summary>
</details>

<x-collapsible [open]="open()">
  @if ($.content) {
    <div *x-slot class="x-accordion-content">
      <ng-container *ngTemplateOutlet="$.content" />
    </div>
  } @else {
    <div class="x-accordion-content">
      <ng-content select="[x-slot='content']:not(ng-template)" />
    </div>
  }
</x-collapsible>
