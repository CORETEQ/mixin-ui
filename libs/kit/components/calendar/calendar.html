<div class="x-calendar-header">
  <button
    x-icon-btn
    (click)="navigatePrevious()"
  >
    <x-icon src="chevron-left" />
  </button>

  <div class="header-title">
    <button
      type="button"
      class="mode-button"
      (click)="toggleSelectionMode()"
    >
      {{ headerTitle() }}
    </button>
  </div>

  <button
    x-icon-btn
    (click)="navigateNext()"
  >
    <x-icon src="chevron-right" />
  </button>
</div>

<div class="calendar-content">
  @switch (mode()) {
    @case ('days') {
      <div class="x-calendar-days">
        @for (day of weekdays(); track day) {
          <div class="x-calendar-weekday">{{ day }}</div>
        }
      </div>

      <div class="x-calendar-days">
        @for (day of daysInMonth(); track day.date.getTime()) {
          @let selected = day.date | map: isDateSelected;

          <button
            type="button"
            class="x-calendar-day"
            [class.x-selected]="selected"
            [class.x-disabled]="day.disabled"
            (click)="selectDate(day.date)">
            {{ day.date | map: format: 'd' }}
          </button>
        }
      </div>
    }
    @case ('months') {
      <div class="months-grid">
        @for (month of monthsInYear(); track month.date.getTime()) {
          <button
            type="button"
            class="month-cell"
            [class.selected]="isMonthSelected(month.date)"
            [class.disabled]="month.disabled"
            [disabled]="month.disabled"
            (click)="selectMonth(month.date)"
          >
            {{ month.date | map: format: 'MMM' }}
          </button>
        }
      </div>
    }
    @case ('years') {
      <div class="years-grid">
        @for (year of yearsInDecade(); track year.date.getTime()) {
          <button
            type="button"
            class="year-cell"
            [class.selected]="isYearSelected(year.date)"
            [class.disabled]="year.disabled"
            [disabled]="year.disabled"
            (click)="selectYear(year.date)"
          >
            {{ year.date | map: format: 'yyyy' }}
          </button>
        }
      </div>
    }
  }
</div>
