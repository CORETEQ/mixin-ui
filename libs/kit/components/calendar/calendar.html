<div class="x-calendar-header">
  <button
    x-icon
    [radius]="radius()"
    [disabled]="mode() === 'months'"
    (click)="navigatePrevious()"
  >
    <x-icon src="chevron-left" />
  </button>
  <x-group class="x-calendar-header-group">
    <button x-btn
            variant="outline"
            [radius]="radius()"
            [attr.aria-pressed]="mode() === 'months'"
            (click)="setMode('months')">
      {{ monthName() }}
    </button>

    <button x-btn
            variant="outline"
            [radius]="radius()"
            [attr.aria-pressed]="mode() === 'years'"
            (click)="setMode('years')">
      {{ year() }}
    </button>
  </x-group>
  <button
    x-icon
    [radius]="radius()"
    [disabled]="mode() === 'months'"
    (click)="navigateNext()"
  >
    <x-icon src="chevron-right" />
  </button>
</div>

@let $ = slots() | asRecord;

<div class="x-calendar-content">
  @switch (mode()) {
    @case ('days') {
      <x-days [date]="month()"
              [value]="value()"
              [min]="min()"
              [max]="max()"
              [startOfWeek]="startOfWeek()"
              [format]="weekdayFormat()"
              (dateChange)="setDay($event)">
        @if ($.day) {
          <ng-template x-slot="item" let-ctx>
            <ng-container *ngTemplateOutlet="$.day; context: { $implicit: ctx }" />
          </ng-template>
        }
      </x-days>
    }
    @case ('months') {
      <x-months [date]="month()"
                [value]="value()"
                [min]="min()"
                [max]="max()"
                [format]="monthFormat()"
                (dateChange)="setMonth($event)">
        @if ($.month) {
          <ng-template x-slot="item" let-ctx>
            <ng-container *ngTemplateOutlet="$.month; context: { $implicit: ctx }" />
          </ng-template>
        }
      </x-months>
    }
    @case ('years') {
      <x-years [date]="month()"
               [value]="value()"
               [min]="min()"
               [max]="max()"
               (dateChange)="setYear($event)">
        @if ($.year) {
          <ng-template x-slot="item" let-ctx>
            <ng-container *ngTemplateOutlet="$.year; context: { $implicit: ctx }" />
          </ng-template>
        }
      </x-years>
    }
  }
</div>
