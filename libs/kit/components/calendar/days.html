@let $ = slots() | asRecord;

<div class="x-calendar-days">
  @for (day of dayNames(); track $index) {
    <div class="x-calendar-weekday">{{ day }}</div>
  }
</div>

<div class="x-calendar-days">
  @for (day of days(); track day.getTime()) {
    @let current = day | map: isCurrent;
    @let selected = day | map: isSelected: value();
    @let disabled = day | map: isDisabled: min() : max();
    @let adjacent = day | map: isAdjacent: date();

    <button
      type="button"
      class="x-calendar-item"
      [class.x-current]="current"
      [class.x-selected]="selected"
      [class.x-adjacent]="adjacent"
      [disabled]="disabled"
      (click)="date.set(day)">

      @if ($.day) {
        <ng-container *ngTemplateOutlet="$.day; context:
          {
            $implicit: { day, current, selected, adjacent, disabled }
          }
        ">
        </ng-container>
      } @else {
        {{ day }}
      }
    </button>
  }
</div>
